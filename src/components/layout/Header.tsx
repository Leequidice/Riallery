'use client';

import { useState, useEffect } from 'react';
import Link from 'next/link';

import { usePathname } from 'next/navigation';
import { Menu, X } from 'lucide-react';
import { navigationLinks } from '@/config/site';
import { cn } from '@/lib/utils';

export default function Header() {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [isScrolled, setIsScrolled] = useState(false);
  const pathname = usePathname();

  useEffect(() => {
    const handleScroll = () => {
      setIsScrolled(window.scrollY > 10);
    };

    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const toggleMenu = () => setIsMenuOpen(!isMenuOpen);

  return (
    <header
      className={cn(
        'fixed top-0 left-0 right-0 z-50 transition-all duration-300',
        isScrolled ? 'bg-neutral-900/95 backdrop-blur-md border-b border-neutral-800' : 'bg-transparent'
      )}
    >
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex items-center justify-between h-16">
          {/* Logo */}
          <Link 
            href="/" 
            className="flex items-center group flex-shrink-0"
          >
            <div className="flex items-center">
              <div className="mr-1 flex-shrink-0">
                <svg width="28" height="30" viewBox="0 0 248 267" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M0 0 C0.82347427 -0.00671722 1.64694855 -0.01343445 2.49537659 -0.02035522 C5.21223017 -0.0393195 7.92883633 -0.0432591 10.64575195 -0.04541016 C12.54279175 -0.05184087 14.43983055 -0.05856944 16.33686829 -0.06558228 C20.31379493 -0.07755234 24.29063474 -0.08126355 28.26757812 -0.08007812 C33.34370302 -0.07987534 38.41926549 -0.10713646 43.49525738 -0.14162254 C47.41513076 -0.16395344 51.33487034 -0.16791372 55.2548008 -0.16685867 C57.1249567 -0.16920689 58.99511674 -0.17798617 60.86520958 -0.19352341 C72.02644888 -0.2775461 80.62532283 0.11208485 90.4465332 5.91552734 C97.12957219 12.96984627 99.51006057 20.35673252 100.95825195 29.77490234 C101.71483683 33.37768748 102.93524508 36.07629332 104.6965332 39.29052734 C105.1296582 40.40427734 105.1296582 40.40427734 105.5715332 41.54052734 C107.22803639 44.11731008 108.76575137 44.37465802 111.6965332 45.29052734 C112.41067383 45.52642578 113.12481445 45.76232422 113.8605957 46.00537109 C118.3252848 47.42981952 122.61596467 48.4583376 127.2590332 49.10302734 C134.2876143 50.29768702 139.21708649 53.74750507 144.1340332 58.79052734 C148.33438743 65.51109411 148.4431305 72.59412311 147.6965332 80.29052734 C145.88159499 86.99108302 142.56329396 91.87013 136.61965942 95.59054565 C130.0610678 99.17821742 124.96399755 99.94201755 117.5637207 99.67333984 C116.01045578 99.65205521 116.01045578 99.65205521 114.42581177 99.63034058 C111.14008276 99.58290672 107.85644437 99.50215066 104.5715332 99.41552734 C81.19930101 97.83875119 81.19930101 97.83875119 59.3840332 104.60302734 C54.76044754 109.226613 53.52660383 112.63920107 53.3215332 119.10302734 C53.51826439 126.00572609 54.77934802 132.00771803 58.8840332 137.66552734 C64.68867559 143.08319357 72.94001701 144.16034219 80.5168457 145.66357422 C86.36069518 146.92868294 90.8080394 148.82004488 94.55981445 153.72802734 C95.03805664 154.57365234 95.51629883 155.41927734 96.0090332 156.29052734 C96.50016602 157.13615234 96.99129883 157.98177734 97.49731445 158.85302734 C99.49317265 162.9097554 99.82868835 166.39191981 99.87353516 170.89428711 C99.89278801 172.58238243 99.89278801 172.58238243 99.91242981 174.30458069 C99.91981674 175.51810715 99.92720367 176.73163361 99.93481445 177.98193359 C99.9428862 179.237556 99.95095795 180.49317841 99.95927429 181.78684998 C99.97310792 184.44737425 99.9841251 187.10777498 99.99169922 189.76831055 C100.0027098 193.14835723 100.03705492 196.52773578 100.07687092 199.90754795 C100.10958907 203.16144224 100.11383828 206.41539994 100.12231445 209.66943359 C100.13982254 210.86879044 100.15733063 212.06814728 100.17536926 213.30384827 C100.15270823 222.19192478 98.52097684 229.54949695 93.9465332 237.22802734 C88.04950794 242.63363383 81.05846214 244.61296205 73.2043457 244.50927734 C66.71162052 243.94293371 60.19807984 242.16720286 55.6965332 237.29052734 C51.55255552 231.11518805 48.58687784 226.19430637 48.53881836 218.64501953 C48.52855621 217.4866156 48.51829407 216.32821167 48.50772095 215.13470459 C48.49676895 213.25503998 48.49676895 213.25503998 48.4855957 211.33740234 C48.46471313 209.36816158 48.44381307 207.39892083 48.42189598 205.42969131 C48.36879668 200.57363984 48.32459096 195.71758172 48.29516602 190.86132812 C48.27822291 188.13797926 48.25348471 185.41491083 48.2203064 182.69171143 C48.18941273 180.12863529 48.16993559 177.5653898 48.16323853 175.00213623 C48.03223335 165.74194155 46.62124583 159.75730965 40.30200195 152.79833984 C34.43707109 147.2901566 27.12046751 147.16090703 19.48876953 147.19287109 C18.79355194 147.19433136 18.09833435 147.19579163 17.38204956 147.19729614 C15.88104853 147.20108381 14.38005189 147.20718081 12.87906837 147.21536255 C10.49380729 147.22821462 8.10860238 147.23466508 5.72331238 147.23950195 C-0.20377498 147.25282127 -6.13080911 147.27694482 -12.05786133 147.30090332 C-17.0666252 147.32075469 -22.07536848 147.33634885 -27.08416176 147.34646606 C-29.4165126 147.35287639 -31.74877722 147.36538649 -34.08110046 147.37817383 C-58.62011571 147.46452036 -58.62011571 147.46452036 -68.3034668 140.29052734 C-74.71403539 133.61547556 -75.68722431 127.99339666 -75.56518555 118.86865234 C-75.10282813 112.54746739 -73.5473697 108.54223513 -69.05737305 104.03662109 C-62.16622029 98.1733724 -56.22294091 96.02381184 -47.10571289 96.0793457 C-46.0821167 96.08131706 -46.0821167 96.08131706 -45.0378418 96.08332825 C-42.8007168 96.0897733 -40.56394374 96.11019751 -38.3269043 96.13037109 C-36.75379813 96.13665434 -35.18068746 96.14189015 -33.60757446 96.14613342 C-29.47300893 96.1593961 -25.3385929 96.18378888 -21.20410156 96.21148682 C-14.60991386 96.25467253 -8.01569211 96.28459869 -1.42140579 96.30752754 C0.86102033 96.31759723 3.14331309 96.3346686 5.4256897 96.3525238 C23.9698912 97.06219875 23.9698912 97.06219875 40.6965332 90.29052734 C45.26389493 85.44377913 45.85214517 80.42578831 45.8840332 73.97802734 C45.89821289 72.68251953 45.91239258 71.38701172 45.92700195 70.05224609 C45.62034566 65.04699163 44.69182003 61.58741624 41.6340332 57.60302734 C32.89185493 50.720887 21.8385778 51.84640155 11.28198242 51.85473633 C0.63594261 51.83661849 -10.50592852 51.66826033 -19.3659668 44.97802734 C-24.95281324 37.22853066 -28.00506647 30.7028291 -26.8269043 21.02880859 C-25.20166024 12.52659902 -20.23822495 7.27232662 -13.3034668 2.29052734 C-8.93846364 0.06091894 -4.79932958 -0.00564583 0 0 Z" fill="#A9DDD3" transform="translate(86.303466796875,10.70947265625)"/>
                </svg>
              </div>
              <span className="text-xl font-light text-white tracking-widest">iallery</span>
            </div>
          </Link>

          {/* Desktop Navigation - Pill Style */}
          <nav className="hidden md:flex items-center bg-neutral-800/80 backdrop-blur-md rounded-full px-6 py-2 border border-neutral-700">
            {navigationLinks.map((link) => (
              <Link
                key={link.href}
                href={link.href}
                className={cn(
                  'text-sm font-medium transition-colors px-4 py-2 rounded-full',
                  pathname === link.href 
                    ? 'text-white bg-neutral-700' 
                    : 'text-neutral-300 hover:text-white'
                )}
              >
                {link.title}
              </Link>
            ))}
          </nav>

          {/* Social Icons */}
          <div className="hidden md:flex items-center space-x-4">
            <a 
              href="https://twitter.com/rialodotclub" 
              target="_blank" 
              rel="noopener noreferrer"
              className="text-neutral-300 hover:text-white transition-colors"
              aria-label="Follow Rialo on Twitter"
            >
              <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
              </svg>
            </a>
            <a 
              href="https://discord.gg/rialo" 
              target="_blank" 
              rel="noopener noreferrer"
              className="text-neutral-300 hover:text-white transition-colors"
              aria-label="Join Rialo Discord server"
            >
              <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.210.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.010c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.120.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.029zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.210 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/>
              </svg>
            </a>
          </div>

          {/* Mobile Menu Button */}
          <button
            className="md:hidden p-2 rounded-lg hover:bg-neutral-800 transition-colors"
            onClick={toggleMenu}
            aria-label="Toggle menu"
          >
            {isMenuOpen ? (
              <X className="h-5 w-5 text-white" />
            ) : (
              <Menu className="h-5 w-5 text-white" />
            )}
          </button>
        </div>

        {/* Mobile Navigation */}
        {isMenuOpen && (
          <div className="md:hidden py-4 border-t border-neutral-700 bg-neutral-800/90 backdrop-blur-md">
            <nav className="flex flex-col space-y-3">
              {navigationLinks.map((link) => (
                <Link
                  key={link.href}
                  href={link.href}
                  className={cn(
                    'px-3 py-2 text-base font-medium rounded-lg transition-colors',
                    pathname === link.href 
                      ? 'text-white bg-neutral-700' 
                      : 'text-neutral-300 hover:text-white hover:bg-neutral-700'
                  )}
                  onClick={() => setIsMenuOpen(false)}
                >
                  {link.title}
                </Link>
              ))}
            </nav>
          </div>
        )}
      </div>
    </header>
  );
}